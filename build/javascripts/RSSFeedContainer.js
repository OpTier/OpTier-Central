/**
 * Wrapper to RSS Feeds
 * @param {[type]} raw  Raw feeds object
 * @param {[String]} type LinkedIn, Facebook, Twitter, YouTube
 */
var RSSFeedContainer=function(e,t){this.type=e,this.container=t,this.url="";var n=$("#rssTmp").html();this.template=Handlebars.compile(n),this.numUnread=0};RSSFeedContainer.prototype={_processFeeds:function(e){var t=this;t.numUnread=0,$.each(e.entries,function(e,n){var r,i=n.publishedDate;i!=""?r=(new Date(i)).getTime():r=n.link,typeof Storage!="undefined"&&(localStorage[r]==1?n.read=!0:(n.read=!1,t.numUnread++))});var n=$("#"+t.type+"-unread");n.html(t.numUnread)},_getFeeds:function(e,t){var n=this;$.ajax({url:"http://ajax.googleapis.com/ajax/services/feed/load?v=1.0&num="+e+"&callback=?&q="+encodeURIComponent(n.url),dataType:"jsonp",type:"GET",timeout:5e3,async:!1,success:function(e){n.feed=e.responseData.feed,n._processFeeds(n.feed),t&&t.call(n)},error:function(e){alert("fail"+e)}})},render:function(){var e=this;e.container.append(e.template(e.feed)),$(".rss-container ul li:not('.hidden')").on("click",function(t){t.stopPropagation(),t.preventDefault();var n,r=$(this).data("feeddate");r!=""?n=(new Date(r)).getTime():n=$(this).data("feedid"),typeof Storage!="undefined"&&localStorage[n]!=1&&(localStorage[n]=1,e.numUnread--),$("#"+e.type+"-unread").html(e.numUnread),$(this).hasClass("show")?$(".rss-container ul li:not('.hidden')").removeClass("show"):($(".rss-container ul li:not('.hidden')").removeClass("show"),$(this).addClass("read show"))})},fetch:function(){var e=this;switch(e.type){case"twitter":e.url="http://api.twitter.com/1/statuses/user_timeline.rss?screen_name=optier";break;case"linkedin":e.url="http://www.linkedin.com/rss/nus?key=WhjzfiEewQ2qrnoEyOkma479eb0yRdY7EuwBxi6RremAaY7KBmy394ZUfVuhXxXC7pY",e.url="http://www.linkedin.com/rss/nus?key=tLJNUGbKw896RLjhb3nDKCRswYfy2UUrOjknlFzsS-lAcW5JkZyY4KPeWHRHGE0m-hE";break;case"youtube":e.url="http://www.youtube.com/rss/user/OpTier01/videos.rss";break;case"blog":e.url="http://www.optier.com/blog/?feed=rss"}e._getFeeds(10,e.render)}};